" ==========================
"   VIM CONFIGURATION FILE
" ==========================

" --- Basics ---
set nocompatible
syntax on
set number
set ruler
set encoding=utf-8
set tabstop=4
set shiftwidth=4
set expandtab
set smartindent
set mouse=a
set clipboard=unnamedplus

" --- Plugin Manager (vim-plug) ---
call plug#begin('~/.vim/plugged')

" Autocompletion framework
Plug 'prabirshrestha/asyncomplete.vim'
Plug 'prabirshrestha/asyncomplete-lsp.vim'


" LSP Support for Vim
Plug 'prabirshrestha/vim-lsp'
Plug 'mattn/vim-lsp-settings'

" Auto pairs 
Plug 'jiangmiao/auto-pairs'

" Nice status line
Plug 'vim-airline/vim-airline'

" Syntax improvements
Plug 'sheerun/vim-polyglot'

call plug#end()

" --- Configure LSP ---
" Automatically detect installed language servers
let g:lsp_settings_servers_dir = expand('~/.local/share/vim-lsp-settings/servers')

" C/C++ LSP setup using clangd
if executable('clangd')
  au User lsp_setup call lsp#register_server({
        \ 'name': 'clangd',
        \ 'cmd': {server_info->['clangd']},
        \ 'whitelist': ['c', 'cpp', 'objc', 'objcpp'],
        \ })
endif

" --- LSP UI Settings ---
nnoremap <silent> gd :LspDefinition<CR>
nnoremap <silent> gr :LspReferences<CR>
nnoremap <silent> K  :LspHover<CR>
nnoremap <silent> rn :LspRename<CR>

" --- Auto Pairs ---
let g:AutoPairsFlyMode = 1

" --- Appearance tweaks ---
set background=dark
set termguicolors
